import{_ as t,r as o,o as c,a as l,b as n,d as s,w as e,F as r,e as p,c as u}from"./app.3f041a55.js";const i={},d={class:"table-of-contents"},k=p("[1]\u6027\u80FD\u76D1\u6D4B"),h=p("\u68C0\u6D4BFPS"),b=p("\u7981\u7528 FPS \u9650\u5236"),m=p("\u76D1\u89C6\u7ED8\u5236\u8C03\u7528"),_=p("\u6E32\u67D3\u4FE1\u606F"),f=p("[2]\u9500\u6BC1"),g=p("[3]\u706F\u5149"),w=p("[4]\u9634\u5F71"),v=p("[5]\u5408\u7406\u7684\u4F7F\u7528castShadow\u548CShadow"),x=p("[6]\u5173\u95ED\u9634\u5F71\u81EA\u52A8\u66F4\u65B0"),y=p("[7]Textures"),M=p("\u8C03\u6574\u7EB9\u7406\u5927\u5C0F"),j=p("\u4FDD\u5B582\u6B21\u65B9\u7684\u5206\u8FA8\u7387"),E=p("\u4F7F\u7528\u6B63\u786E\u7684\u683C\u5F0F"),S=p("[8]Geometries"),R=p("\u4F7F\u7528\u7F13\u51B2\u533A\u51E0\u4F55\u56FE\u5F62"),H=p("\u4E0D\u66F4\u65B0\u9876\u70B9"),T=p("\u5171\u7528\u51E0\u4F55\u56FE\u5F62"),P=p("\u5408\u5E76\u51E0\u4F55\u56FE\u5F62"),G=p("[9]Materials"),L=p("\u5171\u7528\u6750\u8D28"),B=p("\u4F7F\u7528\u7B80\u5355\u7684\u6750\u8D28"),z=p("[10]mesh"),N=p("\u4F7F\u7528\u5B9E\u4F8B\u5316\u7F51\u683C"),F=p("[11]\u6A21\u578B"),D=p("Draco\u538B\u7F29"),I=p("Gzip"),U=p("[12]\u76F8\u673A"),C=p("\u89C6\u91CE"),V=p("Near and far"),q=p("[13]render"),K=p("\u50CF\u7D20\u6BD4"),Q=p("\u7535\u6E90\u9009\u9879"),W=p("\u6297\u952F\u9F7F"),A=p("[14]\u540E\u5904\u7406"),J=p("\u9650\u5236\u901A\u9053\u6570"),X=p("[15]shader"),Y=p("\u6307\u5B9A\u7CBE\u5EA6"),O=p("\u4F7F\u7528\u4F18\u96C5\u7684\u4EE3\u7801"),Z=p("\u4F7F\u7528\u7EB9\u7406"),$=p("\u4F7F\u7528defines"),nn=p("\u5728\u9876\u70B9\u7740\u8272\u5668\u91CD\u8FDB\u884C\u8FD0\u7B97"),an=u(`<h2 id="_1-\u6027\u80FD\u76D1\u6D4B" tabindex="-1"><a class="header-anchor" href="#_1-\u6027\u80FD\u76D1\u6D4B" aria-hidden="true">#</a> [1]\u6027\u80FD\u76D1\u6D4B</h2><h3 id="\u68C0\u6D4Bfps" tabindex="-1"><a class="header-anchor" href="#\u68C0\u6D4Bfps" aria-hidden="true">#</a> \u68C0\u6D4BFPS</h3><p>\u4F7F\u7528stats\uFF0C\u8FD9\u91CC\u5C31\u4E0D\u8FC7\u591A\u8BF4\u660E\u4E86</p><h3 id="\u7981\u7528-fps-\u9650\u5236" tabindex="-1"><a class="header-anchor" href="#\u7981\u7528-fps-\u9650\u5236" aria-hidden="true">#</a> \u7981\u7528 FPS \u9650\u5236</h3><h3 id="\u76D1\u89C6\u7ED8\u5236\u8C03\u7528" tabindex="-1"><a class="header-anchor" href="#\u76D1\u89C6\u7ED8\u5236\u8C03\u7528" aria-hidden="true">#</a> \u76D1\u89C6\u7ED8\u5236\u8C03\u7528</h3><p>\u7ED8\u5236\u8C03\u7528\u662F GPU \u7ED8\u5236\u4E09\u89D2\u5F62\u7684\u64CD\u4F5C\u3002\u5F53\u6211\u4EEC\u6709\u4E00\u4E2A\u5305\u542B\u8BB8\u591A\u5BF9\u8C61\u3001\u51E0\u4F55\u4F53\u3001\u6750\u8D28\u7B49\u7684\u590D\u6742\u573A\u666F\u65F6\uFF0C\u4F1A\u6709\u5F88\u591A\u7ED8\u5236\u8C03\u7528\u3002 \u901A\u5E38\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u89C1\u51CF\u5C11\u7ED8\u5236\u8C03\u7528\u6765\u63D0\u5347\u6027\u80FD \u8FD9\u91CC\u53EF\u4EE5\u4F7F\u7528\u8FD9\u4E2A\u6D4F\u89C8\u5668\u6269\u5C55\u6765\u76D1\u89C6\u7ED8\u5236\u8C03\u7528<a href="https://chrome.google.com/webstore/detail/spectorjs/denbgaamihkadbghdceggmchnflmhpmk" target="_blank" rel="noopener noreferrer">https://chrome.google.com/webstore/detail/spectorjs/denbgaamihkadbghdceggmchnflmhpmk</a> \u5177\u4F53\u7684\u4F7F\u7528\u65B9\u5F0F\u89C1\u5176\u8BF4\u660E\u6587\u6863\u5373\u53EF</p><h2 id="\u6E32\u67D3\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#\u6E32\u67D3\u4FE1\u606F" aria-hidden="true">#</a> \u6E32\u67D3\u4FE1\u606F</h2><p>\u53EF\u4EE5\u901A\u8FC7<code>console.log(renderer.info)</code>\u6253\u5370\u4E00\u4E9B\u5173\u4E8E\u6E32\u67D3\u5668\u7684\u4E00\u4E9B\u4FE1\u606F</p><h2 id="_2-\u9500\u6BC1" tabindex="-1"><a class="header-anchor" href="#_2-\u9500\u6BC1" aria-hidden="true">#</a> [2]\u9500\u6BC1</h2><p>\u4E00\u65E6\u4F60\u786E\u5B9A\u4E86\u67D0\u4E2A\u51E0\u4F55\u4F53\u6216\u8005\u6750\u6599\u7B49\u8D44\u6E90\u4E0D\u518D\u9700\u8981\u4F7F\u7528\uFF0C\u90A3\u4E48\u5C31\u8BF7\u5148\u5C06\u5176\u9500\u6BC1\u6389 \u5173\u4E8E\u5982\u4F55\u9500\u6BC1\uFF0Cthree.js\u5B98\u65B9\u6709\u76F8\u5173\u7684\u6587\u6863\uFF1A <a href="https://threejs.org/docs/#manual/en/introduction/How-to-dispose-of-objects" target="_blank" rel="noopener noreferrer">https://threejs.org/docs/#manual/en/introduction/How-to-dispose-of-objects</a> \u4F8B\u5982\u9500\u6BC1\u4E00\u4E2A\u6B63\u65B9\u4F53\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>scene<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>cube<span class="token punctuation">)</span>
cube<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
cube<span class="token punctuation">.</span>material<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_3-\u706F\u5149" tabindex="-1"><a class="header-anchor" href="#_3-\u706F\u5149" aria-hidden="true">#</a> [3]\u706F\u5149</h2><p>\u5C3D\u53EF\u80FD\u7684\u51CF\u5C11\u590D\u6742\u706F\u5149\u6548\u679C\u7684\u4F7F\u7528\uFF0C\u56E0\u4E3A\u6D88\u8017\u6027\u80FD\u6BD4\u8F83\u5927 \u540C\u65F6\u907F\u514D\u9891\u7E41\u7684\u6DFB\u52A0\u6216\u8005\u5220\u9664\u706F\u5149\uFF0C\u56E0\u4E3A\u573A\u666F\u4E2D\u6DFB\u52A0\u6216\u79FB\u9664\u5149\u6E90\u65F6\uFF0C\u5FC5\u987B\u91CD\u65B0\u7F16\u8BD1\u652F\u6301\u5149\u6E90\u7684\u6240\u6709\u6750\u8D28\u3002\u8FD9\u5C31\u662FThree.js\u7684\u5DE5\u4F5C\u65B9\u5F0F\uFF0C\u5982\u679C\u4F60\u6709\u4E00\u4E2A\u590D\u6742\u7684\u573A\u666F\uFF0C\u8FD9\u53EF\u80FD\u4F1A\u51BB\u7ED3\u5C4F\u5E55\u7247\u523B\u3002</p><h2 id="_4-\u9634\u5F71" tabindex="-1"><a class="header-anchor" href="#_4-\u9634\u5F71" aria-hidden="true">#</a> [4]\u9634\u5F71</h2><p>\u9634\u5F71\u6548\u679C\u4E5F\u662F\u6027\u80FD\u6D88\u5316\u8F83\u5927\u7684\u90E8\u5206\uFF0C\u5982\u679C\u6574\u4F53\u9700\u8981\u6BD4\u8F83\u6781\u81F4\u7684\u4F18\u5316\u6027\u80FD\u8FD9\u90E8\u5206\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u7EB9\u7406\u8D34\u56FE\u4EE3\u66FF\u9634\u5F71\u3002 \u53EF\u4EE5\u901A\u8FC7\u4F18\u5316\u9634\u5F71\u8D34\u56FE\u6765\u8FBE\u5230\u7C7B\u4F3C\u9634\u5F71\u6548\u679C\uFF0C\u4E0B\u9762\u662F\u6A21\u62DF\u601D\u8DEF\uFF1A \u9996\u5148\u53EF\u4EE5\u4F7F\u7528<a href="https://threejs.org/docs/#api/en/helpers/CameraHelper" target="_blank" rel="noopener noreferrer">CameraHelper</a>\u67E5\u770B\u5C06\u7531\u9634\u5F71\u8D34\u56FE\u6444\u50CF\u673A\u6E32\u67D3\u7684\u533A\u57DF\uFF0C\u5E76\u5C06\u5176\u7F29\u5C0F\u5230\u5C3D\u53EF\u80FD\u5C0F\u7684\u533A\u57DF\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token number">3</span>
directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token number">6</span>
directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span> <span class="token number">6</span>
directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>bottom <span class="token operator">=</span> <span class="token operator">-</span> <span class="token number">3</span>
directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>far <span class="token operator">=</span> <span class="token number">10</span>

<span class="token keyword">const</span> cameraHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>CameraHelper</span><span class="token punctuation">(</span>directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">)</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cameraHelper<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u8FD8\u8981\u5C1D\u8BD5\u4F7F\u7528\u5C3D\u53EF\u80FD\u5C0F\u7684\u5206\u8FA8\u7387\uFF0C\u5E76\u7ED9\u51FA\u4E0B\u964D mapSize \u7ED3\u679C\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>mapSize<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_5-\u5408\u7406\u7684\u4F7F\u7528castshadow\u548Cshadow" tabindex="-1"><a class="header-anchor" href="#_5-\u5408\u7406\u7684\u4F7F\u7528castshadow\u548Cshadow" aria-hidden="true">#</a> [5]\u5408\u7406\u7684\u4F7F\u7528castShadow\u548CShadow</h2><p>\u6709\u4E9B\u5BF9\u8C61\u53EF\u4EE5\u6295\u5C04\u9634\u5F71\uFF0C\u6709\u4E9B\u5BF9\u8C61\u53EF\u4EE5\u63A5\u6536\u9634\u5F71\uFF0C\u6709\u4E9B\u5BF9\u8C61\u53EF\u80FD\u4F1A\u540C\u65F6\u6295\u5C04\u9634\u5F71\u3002\u5982\u679C\u60F3\u8981\u8003\u8651\u6027\u80FD\uFF0C\u53EF\u4EE5\u51CF\u5C11\u5F00\u542FcastShadow \u3001receiveShadow \u5BF9\u8C61</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>cube<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span>
cube<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">false</span>

torusKnot<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span>
torusKnot<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">false</span>

sphere<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span>
sphere<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">false</span>

floor<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">false</span>
floor<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_6-\u5173\u95ED\u9634\u5F71\u81EA\u52A8\u66F4\u65B0" tabindex="-1"><a class="header-anchor" href="#_6-\u5173\u95ED\u9634\u5F71\u81EA\u52A8\u66F4\u65B0" aria-hidden="true">#</a> [6]\u5173\u95ED\u9634\u5F71\u81EA\u52A8\u66F4\u65B0</h2><p>\u9634\u5F71\u8D34\u56FE\u4F1A\u5728\u6BCF\u6B21\u6E32\u67D3\u4E4B\u524D\u66F4\u65B0\u3002\u53EF\u4EE5\u901A\u8FC7\u5173\u95ED\u6B64\u81EA\u52A8\u66F4\u65B0\u5E76\u5F00\u542F Three.js\u5F71\u5B50\u8D34\u56FE\u4EC5\u5728\u5FC5\u8981\u65F6\u9700\u8981\u66F4\u65B0\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>autoUpdate <span class="token operator">=</span> <span class="token boolean">false</span>
renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>needsUpdate <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_7-textures" tabindex="-1"><a class="header-anchor" href="#_7-textures" aria-hidden="true">#</a> [7]Textures</h2><h3 id="\u8C03\u6574\u7EB9\u7406\u5927\u5C0F" tabindex="-1"><a class="header-anchor" href="#\u8C03\u6574\u7EB9\u7406\u5927\u5C0F" aria-hidden="true">#</a> \u8C03\u6574\u7EB9\u7406\u5927\u5C0F</h3><p>\u7EB9\u7406\u4F1A\u5360\u7528GPU\u5185\u5B58\u4E2D\u7684\u5927\u91CF\u7A7A\u95F4\uFF0C\u7279\u522B\u662Fmipmap\u7684\u8BDD \u53EF\u4EE5\u5C1D\u8BD5\u7740\u5C06\u5206\u8FA8\u7387\u8C03\u4F4E\u7684\u540C\u65F6\u4FDD\u6301\u8F83\u597D\u7684\u6548\u679C</p><h3 id="\u4FDD\u5B582\u6B21\u65B9\u7684\u5206\u8FA8\u7387" tabindex="-1"><a class="header-anchor" href="#\u4FDD\u5B582\u6B21\u65B9\u7684\u5206\u8FA8\u7387" aria-hidden="true">#</a> \u4FDD\u5B582\u6B21\u65B9\u7684\u5206\u8FA8\u7387</h3><p>\u8FDB\u884Cresizing\u65F6\uFF0C\u4FDD\u63012\u6B21\u65B9\u7684\u5206\u8FA8\u7387\u3002\u8FD9\u5BF9mipmaps\u5F88\u91CD\u8981\u3002 \u5982\u679C\u4E0D\u8FD9\u6837\u505A\uFF0C\u5E76\u4E14\u6E32\u67D3\u9700\u8981mipmap\uFF0CThree.js\u4F1A\u5C1D\u8BD5\u901A\u8FC7\u5C06\u56FE\u50CF\u5927\u5C0F\u8C03\u6574\u5230\u6700\u63A5\u8FD1\u76842\u6B21\u65B9\u5206\u8FA8\u7387\u6765\u4FEE\u590D\u5B83\uFF0C\u4F46\u8FD9\u4E2A\u8FC7\u7A0B\u4F1A\u5360\u7528\u8D44\u6E90\uFF0C\u5E76\u53EF\u80FD\u5BFC\u81F4\u8D28\u91CF\u4E0D\u597D\u7684\u7EB9\u7406\u3002</p><h3 id="\u4F7F\u7528\u6B63\u786E\u7684\u683C\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u6B63\u786E\u7684\u683C\u5F0F" aria-hidden="true">#</a> \u4F7F\u7528\u6B63\u786E\u7684\u683C\u5F0F</h3><p>\u4F7F\u7528\u4EC0\u4E48\u683C\u5F0F\u5E76\u4E0D\u4F1A\u5F71\u54CDGPU\u7684\u5185\u5B58\u7684\u4F7F\u7528\u60C5\u51B5\uFF0C\u4F46\u4F7F\u7528\u5408\u9002\u7684\u683C\u5F0F\u53EF\u4EE5\u9002\u5F53\u7684\u964D\u4F4E\u52A0\u8F7D\u65F6\u95F4\u3002 \u53EF\u4EE5\u6839\u636E\u56FE\u50CF\u548C\u538B\u7F29\u4F7F\u7528.jpg\u6216.png\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528alpha\u901A\u9053\u3002\u53EF\u4EE5\u4F7F\u7528\u4E00\u4E9B\u538B\u7F29\u5DE5\u5177\u5BF9\u56FE\u7247\u8FDB\u884C\u538B\u7F29\u540E\u518D\u4F7F\u7528\u3002</p><h2 id="_8-geometries" tabindex="-1"><a class="header-anchor" href="#_8-geometries" aria-hidden="true">#</a> [8]Geometries</h2><h3 id="\u4F7F\u7528\u7F13\u51B2\u533A\u51E0\u4F55\u56FE\u5F62" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u7F13\u51B2\u533A\u51E0\u4F55\u56FE\u5F62" aria-hidden="true">#</a> \u4F7F\u7528\u7F13\u51B2\u533A\u51E0\u4F55\u56FE\u5F62</h3><p>\u5BF9\u4E8Ethree.js125\u4E4B\u524D\u7684\u7248\u672C\u5E76\u4E0D\u652F\u6301BufferGeometries\uFF0C\u8FD9\u5BF9\u4E8E\u6027\u80FD\u5E76\u4E0D\u597D\uFF0C\u6240\u4EE5\u5E94\u8BE5\u5C3D\u91CF\u4F7F\u7528\u9AD8\u4E8E125\u7684\u7248\u672C \u5982\u679C\u4F7F\u7528\u7684\u662F\u6700\u65B0\u7248\u672C\u7684 Three.js\uFF0C\u5219\u65E0\u9700\u62C5\u5FC3\uFF0C\u6240\u6709\u51E0\u4F55\u56FE\u5F62\u90FD\u662F\u7F13\u51B2\u533A\u51E0\u4F55\u56FE\u5F62\u3002</p><h3 id="\u4E0D\u66F4\u65B0\u9876\u70B9" tabindex="-1"><a class="header-anchor" href="#\u4E0D\u66F4\u65B0\u9876\u70B9" aria-hidden="true">#</a> \u4E0D\u66F4\u65B0\u9876\u70B9</h3><p>\u66F4\u65B0\u51E0\u4F55\u4F53\u7684\u9876\u70B9\u5BF9\u4E8E\u6027\u80FD\u7684\u5F71\u54CD\u662F\u5DE8\u5927\u7684\uFF0C\u518D\u521B\u5EFA\u51E0\u4F55\u56FE\u5F62\u65F6\u6267\u884C\u4E00\u6B21\u5F71\u54CD\u5230\u4E0D\u5927\uFF0C\u4F46\u5E94\u8BE5\u907F\u514D\u518Dtick\u51FD\u6570\u4E2D\u6267\u884C\u8BE5\u64CD\u4F5C \u5982\u679C\u8981\u5BF9\u9876\u70B9\u8FDB\u884C\u52A8\u753B\u5904\u7406\uFF0C\u63A8\u8350\u4F7F\u7528\u9876\u70B9\u7740\u8272\u5668\u4E2D\u5B9E\u73B0\uFF0C\u4E0D\u8981\u76F4\u63A5\u518Dtick\u51FD\u6570\u4E2D\u66F4\u65B0\uFF08\u8FD9\u4E2A\u518D\u4F7F\u7528\u7C92\u5B50\u7CFB\u7EDF\u65F6\u9047\u5230\u8FC7\uFF0C\u6027\u80FD\u5DEE\u522B\u5F88\u5927\uFF09</p><h3 id="\u5171\u7528\u51E0\u4F55\u56FE\u5F62" tabindex="-1"><a class="header-anchor" href="#\u5171\u7528\u51E0\u4F55\u56FE\u5F62" aria-hidden="true">#</a> \u5171\u7528\u51E0\u4F55\u56FE\u5F62</h3><p>\u8FD9\u4E2A\u5F88\u5BB9\u6613\u7406\u89E3\uFF0C\u4E5F\u5F88\u5E38\u89C1\uFF0C\u5982\u679C\u6709\u591A\u4E2A\u7F51\u683C\u4F7F\u7528\u76F8\u540C\u7684\u51E0\u4F55\u5F62\u72B6\uFF0C\u5C31\u53EA\u521B\u5EFA\u4E00\u4E2A\u6765\u4F7F\u7528\u5C31\u884C\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  
  <span class="token keyword">const</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> material<span class="token punctuation">)</span>
  mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span>
  mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span>
  mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span>
  mesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span>
  mesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span>
  
  scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="\u5408\u5E76\u51E0\u4F55\u56FE\u5F62" tabindex="-1"><a class="header-anchor" href="#\u5408\u5E76\u51E0\u4F55\u56FE\u5F62" aria-hidden="true">#</a> \u5408\u5E76\u51E0\u4F55\u56FE\u5F62</h3><p>\u5F53\u4E0D\u9700\u8981\u79FB\u52A8\u51E0\u4F55\u56FE\u5F62\u7684\u4F4D\u7F6E\u65F6\uFF0C\u8FD8\u53EF\u4EE5\u4F7F\u7528BufferGeometryUtils\u6765\u5C06\u591A\u4E2A\u51E0\u4F55\u56FE\u5F62\u5408\u5E76\u4E3A\u4E00\u4E2A\u4E5F\u5C31\u51CF\u5C11\u4E86\u7ED8\u5236\u8C03\u7528\u6765\u63D0\u5347\u6027\u80FD\u3002 \u4F7F\u7528\u793A\u4F8B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> geometries <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span>
  
  geometry<span class="token punctuation">.</span><span class="token function">rotateX</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
  geometry<span class="token punctuation">.</span><span class="token function">rotateY</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
  
  geometry<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span>
  <span class="token punctuation">)</span>
  
  geometries<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>geometry<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> mergedGeometry <span class="token operator">=</span> BufferGeometryUtils<span class="token punctuation">.</span><span class="token function">mergeBufferGeometries</span><span class="token punctuation">(</span>geometries<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mergedGeometry<span class="token punctuation">)</span>

<span class="token keyword">const</span> material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>mergedGeometry<span class="token punctuation">,</span> material<span class="token punctuation">)</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="_9-materials" tabindex="-1"><a class="header-anchor" href="#_9-materials" aria-hidden="true">#</a> [9]Materials</h2><h3 id="\u5171\u7528\u6750\u8D28" tabindex="-1"><a class="header-anchor" href="#\u5171\u7528\u6750\u8D28" aria-hidden="true">#</a> \u5171\u7528\u6750\u8D28</h3><p>\u5F88\u597D\u7406\u89E3\uFF0C\u4E5F\u5C31\u662F\u591A\u4E2A\u51E0\u4F55\u4F7F\u7528\u540C\u4E00\u4E2A\u6750\u6599\uFF0C\u6784\u5EFA\u591A\u4E2A\u4E0D\u540Cmesh</p><h3 id="\u4F7F\u7528\u7B80\u5355\u7684\u6750\u8D28" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u7B80\u5355\u7684\u6750\u8D28" aria-hidden="true">#</a> \u4F7F\u7528\u7B80\u5355\u7684\u6750\u8D28</h3><ul><li>\u5360\u7528\u6E32\u67D3\u8D44\u6E90 <code>MeshBasicMaterial</code> &lt; <code>MeshLambertMaterial</code> &lt; <code>MeshPhongMaterial</code> &lt; <code>MeshStandardMaterial</code> &lt; <code>MeshPhysicalMaterial</code></li><li>\u6E32\u67D3\u8868\u73B0\u80FD\u529B <code>MeshBasicMaterial</code> &lt; <code>MeshLambertMaterial</code> &lt; <code>MeshPhongMaterial</code> &lt; <code>MeshStandardMaterial </code>&lt; <code>MeshPhysicalMaterial</code></li></ul><h2 id="_10-mesh" tabindex="-1"><a class="header-anchor" href="#_10-mesh" aria-hidden="true">#</a> [10]mesh</h2><h3 id="\u4F7F\u7528\u5B9E\u4F8B\u5316\u7F51\u683C" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u5B9E\u4F8B\u5316\u7F51\u683C" aria-hidden="true">#</a> \u4F7F\u7528\u5B9E\u4F8B\u5316\u7F51\u683C</h3><p>\u901A\u8FC7\u6784\u5EFA\u4E00\u4E2A\u5B9E\u4F8B\u5316\u7F51\u683C\uFF0C\u7136\u540E\u4F7F\u7528\u77E9\u9635\u6765\u8FDB\u884C\u53D8\u5316\u5F97\u51FA\u5176\u4ED6\u7F51\u683C \u793A\u4F8B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>InstancedMesh</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> material<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span>
	<span class="token punctuation">)</span>

  <span class="token keyword">const</span> quaternion <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Quaternion</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  quaternion<span class="token punctuation">.</span><span class="token function">setFromEuler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Euler</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  
  <span class="token keyword">const</span> matrix <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Matrix4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  matrix<span class="token punctuation">.</span><span class="token function">makeRotationFromQuaternion</span><span class="token punctuation">(</span>quaternion<span class="token punctuation">)</span>
  matrix<span class="token punctuation">.</span><span class="token function">setPosition</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span>
  
  mesh<span class="token punctuation">.</span><span class="token function">setMatrixAt</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> matrix<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="_11-\u6A21\u578B" tabindex="-1"><a class="header-anchor" href="#_11-\u6A21\u578B" aria-hidden="true">#</a> [11]\u6A21\u578B</h2><p>\u5BF9\u4E8E\u6A21\u578B\u9996\u5148\u662F\u5C3D\u91CF\u4F7F\u7528\u4F4E\u591A\u8FB9\u5F62</p><h3 id="draco\u538B\u7F29" tabindex="-1"><a class="header-anchor" href="#draco\u538B\u7F29" aria-hidden="true">#</a> Draco\u538B\u7F29</h3><p>\u5982\u679C\u6A21\u578B\u6709\u5F88\u591A\u7EC6\u8282\u548C\u975E\u5E38\u590D\u6742\u7684\u51E0\u4F55\u5F62\u72B6\uFF0C\u8BF7\u4F7F\u7528 Draco \u538B\u7F29\u3002\u5B83\u53EF\u4EE5\u5927\u5927\u51CF\u8F7B\u91CD\u91CF\u3002\u7F3A\u70B9\u662F\u89E3\u538B\u7F29\u51E0\u4F55\u4F53\u65F6\u53EF\u80FD\u4F1A\u51BB\u7ED3\uFF0C\u8FD8\u5FC5\u987B\u52A0\u8F7D Draco \u5E93\u3002</p><h3 id="gzip" tabindex="-1"><a class="header-anchor" href="#gzip" aria-hidden="true">#</a> Gzip</h3><p><code>Gzip</code>\u662F\u5728\u670D\u52A1\u5668\u7AEF\u7684\u538B\u7F29\u3002\u5927\u591A\u6570\u670D\u52A1\u5668\u4E0D\u538B\u7F29\u6587\u4EF6\uFF0C\u5982 .glb \u3001 .gltf \u3001 .obj \u7B49</p><h2 id="_12-\u76F8\u673A" tabindex="-1"><a class="header-anchor" href="#_12-\u76F8\u673A" aria-hidden="true">#</a> [12]\u76F8\u673A</h2><h3 id="\u89C6\u91CE" tabindex="-1"><a class="header-anchor" href="#\u89C6\u91CE" aria-hidden="true">#</a> \u89C6\u91CE</h3><p>\u5F53\u7A7A\u95F4\u5BF9\u8C61\u4E0D\u5728\u89C6\u91CE\u4E2D\u65F6\uFF0C\u5B83\u4EEC\u4E0D\u4F1A\u88AB\u6E32\u67D3\u3002\u8FD9\u79F0\u4E3A\u89C6\u9525\u5254\u9664\u3002 \u8FD9\u4F3C\u4E4E\u4E0D\u662F\u4E00\u4E2A\u5F88\u597D\u7684\u89E3\u51B3\u65B9\u6848\uFF0C\u4F46\u4F60\u8FD8\u662F\u53EF\u4EE5\u901A\u8FC7\u7F29\u5C0F\u76F8\u673A\u7684\u89C6\u91CE\uFF0C\u8FD9\u6837\u5C4F\u5E55\u4E0A\u7684\u5BF9\u8C61\u8D8A\u5C11\uFF0C\u8981\u6E32\u67D3\u7684\u4E09\u89D2\u5F62\u5C31\u8D8A\u5C11\u3002</p><h3 id="near-and-far" tabindex="-1"><a class="header-anchor" href="#near-and-far" aria-hidden="true">#</a> Near and far</h3><p>\u5C31\u50CF\u89C6\u91CE\u4E00\u6837\uFF0C\u53EF\u4EE5\u51CF\u5C11\u76F8\u673A\u7684 <code>near</code> \u548C <code>far</code> \u5C5E\u6027\u3002\u6BD4\u5982\u4F60\u6709\u4E00\u4E2A\u5E7F\u9614\u7684\u4E16\u754C\uFF0C\u6709\u5C71\u8109\u3001\u6811\u6728\u3001\u7ED3\u6784\u7B49\uFF0C\u7528\u6237\u53EF\u80FD\u770B\u4E0D\u5230\u90A3\u4E9B\u8FDC\u5728\u5C71\u540E\u9762\u770B\u4E0D\u89C1\u7684\u5C0F\u623F\u5B50\u3002\u8FD9\u65F6\u5C31\u53EF\u4EE5\u964D\u4F4E <code>far</code> \u5230\u4E00\u4E2A\u4F53\u9762\u7684\u4EF7\u503C\uFF0C\u8FD9\u4E9B\u623F\u5C4B\u5C31\u4E0D\u4F1A\u88AB\u6E32\u67D3\u4E86\u3002</p><h2 id="_13-render" tabindex="-1"><a class="header-anchor" href="#_13-render" aria-hidden="true">#</a> [13]render</h2><h3 id="\u50CF\u7D20\u6BD4" tabindex="-1"><a class="header-anchor" href="#\u50CF\u7D20\u6BD4" aria-hidden="true">#</a> \u50CF\u7D20\u6BD4</h3><p>\u63A8\u8350\u5C06\u6E32\u67D3\u5668\u7684\u50CF\u7D20\u6BD4\u63A7\u5236\u4F4D2</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>renderer<span class="token punctuation">.</span><span class="token function">setPixelRatio</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="\u7535\u6E90\u9009\u9879" tabindex="-1"><a class="header-anchor" href="#\u7535\u6E90\u9009\u9879" aria-hidden="true">#</a> \u7535\u6E90\u9009\u9879</h3><p>\u53EF\u4EE5\u901A\u8FC7\u6307\u5B9A\u4E00\u4E2A powerPreference \u5C5E\u6027\u6765\u63D0\u793A\u5B9E\u4F8B\u5316 WebGLRenderer \u65F6\u9700\u8981\u4EC0\u4E48\u529F\u7387\uFF0C\u5982\u679C\u5BF9\u4E8E\u4E0D\u8003\u8651\u7535\u6E90\u6D88\u8017\uFF0C\u53EF\u4EE5\u8003\u8651\u5F00\u542Fhigh-performance\uFF08\u9ED8\u8BA4\u4E3Adefault\uFF09</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">canvas</span><span class="token operator">:</span> canvas<span class="token punctuation">,</span>
  <span class="token literal-property property">powerPreference</span><span class="token operator">:</span> <span class="token string">&#39;high-performance&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="\u6297\u952F\u9F7F" tabindex="-1"><a class="header-anchor" href="#\u6297\u952F\u9F7F" aria-hidden="true">#</a> \u6297\u952F\u9F7F</h3><p>\u9ED8\u8BA4\u7684\u6297\u952F\u9F7F\u4E5F\u662F\u6D88\u8017\u6027\u80FD\u7684\u9009\u9879\uFF0C\u53EF\u4EE5\u518D\u9700\u8981\u65F6\u518D\u5F00\u542F\u5B83</p><h2 id="_14-\u540E\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#_14-\u540E\u5904\u7406" aria-hidden="true">#</a> [14]\u540E\u5904\u7406</h2><h3 id="\u9650\u5236\u901A\u9053\u6570" tabindex="-1"><a class="header-anchor" href="#\u9650\u5236\u901A\u9053\u6570" aria-hidden="true">#</a> \u9650\u5236\u901A\u9053\u6570</h3><p>\u56E0\u4E3A\u6BCF\u4E2A\u540E\u5904\u7406\u8FC7\u7A0B\u5C06\u4F7F\u7528\u4E0E\u6E32\u67D3\u5206\u8FA8\u7387\uFF08\u5305\u62EC\u50CF\u7D20\u6BD4\u7387\uFF09\u4E00\u6837\u591A\u7684\u50CF\u7D20\u8FDB\u884C\u6E32\u67D3\u3002\u5982\u679C\u5206\u8FA8\u7387\u4E3A1920x1080\uFF0C\u540E\u5904\u7406\u901A\u9053\u6570\u4E3A4\uFF0C\u50CF\u7D20\u6BD4\u4E3A2\uFF0C\u5219\u9700\u8981\u6E32\u67D31920<em>2</em>1080<em>2</em>4=33 177 600\u50CF\u7D20\u3002 \u5BF9\u4E8E\u8FD9\u65B9\u9762\u4E0B\u6027\u80FD\u4F18\u5316\u53EF\u4EE5\u505A\u7684\u662F\u901A\u8FC7\u81EA\u5B9A\u4E49\u901A\u9053\u6765\u5C06\u539F\u6709\u7684\u591A\u4E2A\u901A\u9053\u5408\u5E76\u4E3A\u4E00\u4E2A</p><h2 id="_15-shader" tabindex="-1"><a class="header-anchor" href="#_15-shader" aria-hidden="true">#</a> [15]shader</h2><h3 id="\u6307\u5B9A\u7CBE\u5EA6" tabindex="-1"><a class="header-anchor" href="#\u6307\u5B9A\u7CBE\u5EA6" aria-hidden="true">#</a> \u6307\u5B9A\u7CBE\u5EA6</h3><p>\u5BF9\u4E8EShaderMaterial\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> shaderMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ShaderMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">precision</span><span class="token operator">:</span> <span class="token string">&#39;lowp&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u5BF9\u4E8ERawShaderMaterial\u5219\u9700\u8981\u50CF\u539F\u59CB\u7684webgl\u7740\u8272\u5668\u4E00\u6837\u901A\u8FC7precision\u8BBE\u5B9A</p><h3 id="\u4F7F\u7528\u4F18\u96C5\u7684\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u4F18\u96C5\u7684\u4EE3\u7801" aria-hidden="true">#</a> \u4F7F\u7528\u4F18\u96C5\u7684\u4EE3\u7801</h3><p>\u5C3D\u91CF\u4FDD\u6301\u7740\u8272\u5668\u4EE3\u7801\u5C3D\u53EF\u80FD\u7B80\u5355\u3002\u907F\u514D if \u8BED\u53E5\u3002\u5145\u5206\u5229\u7528\u65CB\u8F6C\u548C\u5185\u7F6E\u529F\u80FD\u3002 \u4F8B\u5982\u4E0B\u9762\u7684\u8BED\u53E5\u4E0D\u8981\u4F7F\u7528if\u8BED\u53E5\u66FF\u6362</p><div class="language-glsl ext-glsl line-numbers-mode"><pre class="language-glsl"><code>modelPosition<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token function">clamp</span><span class="token punctuation">(</span>elevation<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span> <span class="token operator">*</span> uDisplacementStrength<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="\u4F7F\u7528\u7EB9\u7406" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u7EB9\u7406" aria-hidden="true">#</a> \u4F7F\u7528\u7EB9\u7406</h3><p>\u867D\u7136\u53EF\u4EE5\u4F7F\u7528shader\u5B9E\u73B0\u5404\u79CD\u590D\u6742\u903C\u771F\u7684\u6548\u679C\uFF0C\u6BD4\u5982\u67CF\u6797\u566A\u58F0\uFF0C\u4F46\u8FD9\u5BF9\u4E8E\u6027\u80FD\u7684\u5F71\u54CD\u662F\u5F88\u5927\u7684\u3002\u53EF\u4EE5\u4F7F\u7528\u7EB9\u7406\u6765\u4EE3\u66FF\u4EE5\u63D0\u5347\u6027\u80FD</p><h3 id="\u4F7F\u7528defines" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528defines" aria-hidden="true">#</a> \u4F7F\u7528defines</h3><p>\u4F7F\u7528unifroms\u53EF\u4EE5\u5B9E\u65F6\u518DJavaScript\u8C03\u6574\u503C\u5E76\u4F20\u9012\uFF0C\u4F46\u4E5F\u662F\u5BF9\u6027\u80FD\u6709\u6240\u5F71\u54CD\u7684\u3002\u5982\u679C\u503C\u4E0D\u9700\u8981\u4FEE\u6539\u5219\u63A8\u8350\u76F4\u63A5\u518D\u7740\u8272\u5668\u4E2D\u901A\u8FC7defines\u5B9A\u4E49\uFF0C\u4E0B\u9762\u6709\u4E24\u79CD\u65B9\u5F0F\u5B9A\u4E49\uFF1A</p><div class="language-glsl ext-glsl line-numbers-mode"><pre class="language-glsl"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">uDisplacementStrength</span> <span class="token expression"><span class="token number">1.5</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-glsl ext-glsl line-numbers-mode"><pre class="language-glsl"><code><span class="token keyword">const</span> shaderMaterial <span class="token operator">=</span> new THREE<span class="token punctuation">.</span><span class="token function">ShaderMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

<span class="token comment">// ...</span>

defines<span class="token operator">:</span>
<span class="token punctuation">{</span>
uDisplacementStrength<span class="token operator">:</span> <span class="token number">1.5</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="\u5728\u9876\u70B9\u7740\u8272\u5668\u91CD\u8FDB\u884C\u8FD0\u7B97" tabindex="-1"><a class="header-anchor" href="#\u5728\u9876\u70B9\u7740\u8272\u5668\u91CD\u8FDB\u884C\u8FD0\u7B97" aria-hidden="true">#</a> \u5728\u9876\u70B9\u7740\u8272\u5668\u91CD\u8FDB\u884C\u8FD0\u7B97</h3><p>\u5982\u679C\u53EF\u63A8\u8350\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8FDB\u884C\u8FD0\u7B97\uFF0C\u7136\u540E\u5C06\u7ED3\u679C\u53D1\u9001\u5230\u7247\u6BB5\u7740\u8272\u5668\u3002</p>`,90);function sn(en,pn){const a=o("RouterLink");return c(),l(r,null,[n("nav",d,[n("ul",null,[n("li",null,[s(a,{to:"#_1-\u6027\u80FD\u76D1\u6D4B"},{default:e(()=>[k]),_:1}),n("ul",null,[n("li",null,[s(a,{to:"#\u68C0\u6D4Bfps"},{default:e(()=>[h]),_:1})]),n("li",null,[s(a,{to:"#\u7981\u7528-fps-\u9650\u5236"},{default:e(()=>[b]),_:1})]),n("li",null,[s(a,{to:"#\u76D1\u89C6\u7ED8\u5236\u8C03\u7528"},{default:e(()=>[m]),_:1})])])]),n("li",null,[s(a,{to:"#\u6E32\u67D3\u4FE1\u606F"},{default:e(()=>[_]),_:1})]),n("li",null,[s(a,{to:"#_2-\u9500\u6BC1"},{default:e(()=>[f]),_:1})]),n("li",null,[s(a,{to:"#_3-\u706F\u5149"},{default:e(()=>[g]),_:1})]),n("li",null,[s(a,{to:"#_4-\u9634\u5F71"},{default:e(()=>[w]),_:1})]),n("li",null,[s(a,{to:"#_5-\u5408\u7406\u7684\u4F7F\u7528castshadow\u548Cshadow"},{default:e(()=>[v]),_:1})]),n("li",null,[s(a,{to:"#_6-\u5173\u95ED\u9634\u5F71\u81EA\u52A8\u66F4\u65B0"},{default:e(()=>[x]),_:1})]),n("li",null,[s(a,{to:"#_7-textures"},{default:e(()=>[y]),_:1}),n("ul",null,[n("li",null,[s(a,{to:"#\u8C03\u6574\u7EB9\u7406\u5927\u5C0F"},{default:e(()=>[M]),_:1})]),n("li",null,[s(a,{to:"#\u4FDD\u5B582\u6B21\u65B9\u7684\u5206\u8FA8\u7387"},{default:e(()=>[j]),_:1})]),n("li",null,[s(a,{to:"#\u4F7F\u7528\u6B63\u786E\u7684\u683C\u5F0F"},{default:e(()=>[E]),_:1})])])]),n("li",null,[s(a,{to:"#_8-geometries"},{default:e(()=>[S]),_:1}),n("ul",null,[n("li",null,[s(a,{to:"#\u4F7F\u7528\u7F13\u51B2\u533A\u51E0\u4F55\u56FE\u5F62"},{default:e(()=>[R]),_:1})]),n("li",null,[s(a,{to:"#\u4E0D\u66F4\u65B0\u9876\u70B9"},{default:e(()=>[H]),_:1})]),n("li",null,[s(a,{to:"#\u5171\u7528\u51E0\u4F55\u56FE\u5F62"},{default:e(()=>[T]),_:1})]),n("li",null,[s(a,{to:"#\u5408\u5E76\u51E0\u4F55\u56FE\u5F62"},{default:e(()=>[P]),_:1})])])]),n("li",null,[s(a,{to:"#_9-materials"},{default:e(()=>[G]),_:1}),n("ul",null,[n("li",null,[s(a,{to:"#\u5171\u7528\u6750\u8D28"},{default:e(()=>[L]),_:1})]),n("li",null,[s(a,{to:"#\u4F7F\u7528\u7B80\u5355\u7684\u6750\u8D28"},{default:e(()=>[B]),_:1})])])]),n("li",null,[s(a,{to:"#_10-mesh"},{default:e(()=>[z]),_:1}),n("ul",null,[n("li",null,[s(a,{to:"#\u4F7F\u7528\u5B9E\u4F8B\u5316\u7F51\u683C"},{default:e(()=>[N]),_:1})])])]),n("li",null,[s(a,{to:"#_11-\u6A21\u578B"},{default:e(()=>[F]),_:1}),n("ul",null,[n("li",null,[s(a,{to:"#draco\u538B\u7F29"},{default:e(()=>[D]),_:1})]),n("li",null,[s(a,{to:"#gzip"},{default:e(()=>[I]),_:1})])])]),n("li",null,[s(a,{to:"#_12-\u76F8\u673A"},{default:e(()=>[U]),_:1}),n("ul",null,[n("li",null,[s(a,{to:"#\u89C6\u91CE"},{default:e(()=>[C]),_:1})]),n("li",null,[s(a,{to:"#near-and-far"},{default:e(()=>[V]),_:1})])])]),n("li",null,[s(a,{to:"#_13-render"},{default:e(()=>[q]),_:1}),n("ul",null,[n("li",null,[s(a,{to:"#\u50CF\u7D20\u6BD4"},{default:e(()=>[K]),_:1})]),n("li",null,[s(a,{to:"#\u7535\u6E90\u9009\u9879"},{default:e(()=>[Q]),_:1})]),n("li",null,[s(a,{to:"#\u6297\u952F\u9F7F"},{default:e(()=>[W]),_:1})])])]),n("li",null,[s(a,{to:"#_14-\u540E\u5904\u7406"},{default:e(()=>[A]),_:1}),n("ul",null,[n("li",null,[s(a,{to:"#\u9650\u5236\u901A\u9053\u6570"},{default:e(()=>[J]),_:1})])])]),n("li",null,[s(a,{to:"#_15-shader"},{default:e(()=>[X]),_:1}),n("ul",null,[n("li",null,[s(a,{to:"#\u6307\u5B9A\u7CBE\u5EA6"},{default:e(()=>[Y]),_:1})]),n("li",null,[s(a,{to:"#\u4F7F\u7528\u4F18\u96C5\u7684\u4EE3\u7801"},{default:e(()=>[O]),_:1})]),n("li",null,[s(a,{to:"#\u4F7F\u7528\u7EB9\u7406"},{default:e(()=>[Z]),_:1})]),n("li",null,[s(a,{to:"#\u4F7F\u7528defines"},{default:e(()=>[$]),_:1})]),n("li",null,[s(a,{to:"#\u5728\u9876\u70B9\u7740\u8272\u5668\u91CD\u8FDB\u884C\u8FD0\u7B97"},{default:e(()=>[nn]),_:1})])])])])]),an],64)}var on=t(i,[["render",sn],["__file","three.js\u6027\u80FD\u4F18\u5316\u76F8\u5173.html.vue"]]);export{on as default};
