import{_ as e,r as o,o as c,a as l,b as n,d as a,w as p,F as u,e as t,c as i}from"./app.3f041a55.js";const r={},k={class:"table-of-contents"},b=t("1.Decorator \u88C5\u9970\u5668\u6A21\u5F0F"),m=t("\u57FA\u672C\u539F\u7406"),d=t("\u5E94\u7528\u4E3E\u4F8B"),w=t("2.Adapter\u9002\u914D\u5668\u6A21\u5F0F"),y=t("\u57FA\u672C\u539F\u7406"),h=t("\u5E94\u7528\u4E3E\u4F8B"),f=i(`<h2 id="_1-decorator-\u88C5\u9970\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_1-decorator-\u88C5\u9970\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 1.Decorator \u88C5\u9970\u5668\u6A21\u5F0F</h2><h3 id="\u57FA\u672C\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#\u57FA\u672C\u539F\u7406" aria-hidden="true">#</a> \u57FA\u672C\u539F\u7406</h3><p>\u88C5\u9970\u5668\u6A21\u5F0F\u4E3B\u8981\u89E3\u51B3\u7EE7\u627F\u5173\u7CFB\u8FC7\u4E8E\u590D\u6742\u7684\u95EE\u9898\uFF0C\u901A\u8FC7\u7EC4\u5408\u6765\u66FF\u4EE3\u7EE7\u627F\u3002\u5B83\u4E3B\u8981\u7684\u4F5C\u7528\u662F\u7ED9\u539F\u59CB\u7C7B\u6DFB\u52A0\u589E\u5F3A\u529F\u80FD\u3002\u8FD9\u4E5F\u662F\u5224\u65AD\u662F\u5426\u8BE5\u7528\u88C5\u9970\u5668\u6A21\u5F0F\u7684\u4E00\u4E2A\u91CD\u8981\u7684\u4F9D\u636E\u3002\u9664\u6B64\u4E4B\u5916\uFF0C\u88C5\u9970\u5668\u6A21\u5F0F\u8FD8\u6709\u4E00\u4E2A\u7279\u70B9\uFF0C\u90A3\u5C31\u662F\u53EF\u4EE5\u5BF9\u539F\u59CB\u7C7B\u5D4C\u5957\u4F7F\u7528\u591A\u4E2A\u88C5\u9970\u5668\u3002\u4E3A\u4E86\u6EE1\u8DB3\u8FD9\u4E2A\u5E94\u7528\u573A\u666F\uFF0C\u5728\u8BBE\u8BA1\u7684\u65F6\u5019\uFF0C\u88C5\u9970\u5668\u7C7B\u9700\u8981\u8DDF\u539F\u59CB\u7C7B\u7EE7\u627F\u76F8\u540C\u7684\u62BD\u8C61\u7C7B\u6216\u8005\u63A5\u53E3</p><ul><li><strong>Component Interface</strong>\uFF1A\u5BF9\u8C61\u7684\u63A5\u53E3\uFF08\u5171\u53EF\u88C5\u9970\u7C7B\u548C\u88C5\u9970\u7C7B\u4F7F\u7528\uFF09</li><li><strong>Component</strong>\uFF1A\u53EF\u88C5\u9970\u7684\u5BF9\u8C61</li><li><strong>Decorator</strong>\uFF1A\u88C5\u9970\u5668\u7C7B\uFF0C\u5C06\u989D\u5916\u4EFB\u52A1\u5E94\u7528\u4E8E\u7EC4\u4EF6\u7684\u7C7B\uFF0C\u5B83\u8FD8\u5B9E\u73B0\u4E86\u76F8\u540C\u7684\u7EC4\u4EF6\u63A5\u53E3</li></ul><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5ad2b811179842d0b78bb87e8d0752ab~tplv-k3u1fbpfcp-zoom-1.image" alt="\u5728\u8FD9\u91CC\u63D2\u5165\u56FE\u7247\u63CF\u8FF0"></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IComponent</span> <span class="token punctuation">{</span>
    <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u751F\u6210\u88C5\u9970\u5668\u5BF9\u8C61\u7684\u7C7B</span>
<span class="token keyword">class</span> <span class="token class-name">Component</span> <span class="token keyword">implements</span> <span class="token class-name">IComponent</span> <span class="token punctuation">{</span>
    <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&#39;Component Method&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u88C5\u9970\u5668\u7C7B</span>
<span class="token keyword">class</span> <span class="token class-name">Decorator</span> <span class="token keyword">implements</span> <span class="token class-name">IComponent</span> <span class="token punctuation">{</span>
    #object<span class="token operator">:</span> IComponent
<span class="token comment">// \u63A5\u53D7\u4E00\u4E2A\u88AB\u88C5\u9970\u7C7B</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>object<span class="token operator">:</span> IComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>#object <span class="token operator">=</span> object
    <span class="token punctuation">}</span>

    <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Decorator Method(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">this</span><span class="token punctuation">.</span>#object<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">\`</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token constant">COMPONENT</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">COMPONENT</span><span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//Component Method</span>

<span class="token comment">// Component\u7C7B\u88ABDecorator\u7C7B\u88C5\u9970</span>
<span class="token keyword">const</span> Decorated <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Decorator</span><span class="token punctuation">(</span><span class="token constant">COMPONENT</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Decorated<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//Decorator Method(Component Method)</span>

<span class="token comment">//\u88AB\u88C5\u9970\u8FC7\u7684\u7C7BComponent\u53EF\u4EE5\u5728\u88AB\u88C5\u9970\uFF08\u5957\u5A03\u54AF\uFF09</span>
<span class="token keyword">const</span> Decorated2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Decorator</span><span class="token punctuation">(</span>Decorated<span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Decorated2<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//Decorator Method(Decorator Method(Component Method))</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="\u5E94\u7528\u4E3E\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u5E94\u7528\u4E3E\u4F8B" aria-hidden="true">#</a> \u5E94\u7528\u4E3E\u4F8B</h3><p>\u8BA9\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3AValue\u7C7B\u6765\u4FDD\u5B58\u4E00\u4E2A\u6570\u7EC4\uFF0C\u7136\u540E\u6DFB\u52A0\u5BF9\u6570\u5B57(<code>Value</code>)\u8FDB\u884C\u52A0\u6CD5 (<code>Add</code>)\u548C\u51CF\u6CD5 (<code>Sub</code>) \u7684\u88C5\u9970\u5668\u6765\u5B9E\u73B0\u7ED9\u5BF9\u8C61\u6DFB\u52A0\u65B0\u7684\u529F\u80FD\uFF0C\u800C\u4E0D\u6539\u53D8\u5BF9\u8C61\u672C\u8EAB\u7684\u3002</p><p><code>Add</code> \u548C <code>Sub</code> \u88C5\u9970\u5668\u53EF\u4EE5\u76F4\u63A5\u63A5\u53D7\u6570\u5B57\u3001\u81EA\u5B9A\u4E49 <code>Value</code> \u5BF9\u8C61\u6216\u5176\u4ED6 <code>Add</code> \u548C <code>Sub</code> \u88C5\u9970\u5668</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c8816af7ea0a419d8e8ffc7a825b39ce~tplv-k3u1fbpfcp-zoom-1.image" alt="\u5728\u8FD9\u91CC\u63D2\u5165\u56FE\u7247\u63CF\u8FF0"></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IValue</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Sub</span> <span class="token keyword">implements</span> <span class="token class-name">IValue</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token builtin">number</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>val1<span class="token operator">:</span> IValue <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">,</span> val2<span class="token operator">:</span> IValue <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> left <span class="token operator">=</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>val1<span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">)</span>
            <span class="token operator">?</span> <span class="token punctuation">(</span>val1 <span class="token keyword">as</span> IValue<span class="token punctuation">)</span><span class="token punctuation">.</span>value
            <span class="token operator">:</span> <span class="token punctuation">(</span>val1 <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> right <span class="token operator">=</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>val2<span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">)</span>
            <span class="token operator">?</span> <span class="token punctuation">(</span>val2 <span class="token keyword">as</span> IValue<span class="token punctuation">)</span><span class="token punctuation">.</span>value
            <span class="token operator">:</span> <span class="token punctuation">(</span>val2 <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> left <span class="token operator">-</span> right
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">class</span> <span class="token class-name">Add</span> <span class="token keyword">implements</span> <span class="token class-name">IValue</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token builtin">number</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>val1<span class="token operator">:</span> IValue <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">,</span> val2<span class="token operator">:</span> IValue <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> left <span class="token operator">=</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>val1<span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">)</span>
            <span class="token operator">?</span> <span class="token punctuation">(</span>val1 <span class="token keyword">as</span> IValue<span class="token punctuation">)</span><span class="token punctuation">.</span>value
            <span class="token operator">:</span> <span class="token punctuation">(</span>val1 <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> right <span class="token operator">=</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>val2<span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">)</span>
            <span class="token operator">?</span> <span class="token punctuation">(</span>val2 <span class="token keyword">as</span> IValue<span class="token punctuation">)</span><span class="token punctuation">.</span>value
            <span class="token operator">:</span> <span class="token punctuation">(</span>val2 <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> left <span class="token operator">+</span> right
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//\u88C5\u9970\u5668\u7C7B</span>
<span class="token keyword">class</span> <span class="token class-name">Value</span> <span class="token keyword">implements</span> <span class="token class-name">IValue</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token builtin">number</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u88C5\u9970\u5668</span>
<span class="token keyword">const</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Value</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> 
<span class="token keyword">const</span> <span class="token constant">B</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Value</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token constant">C</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Value</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Add</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">//3</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Add</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">//101</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">//4</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Add</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">//6</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">//-1</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Add</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token comment">//106</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">,</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token comment">//113</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Add</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">//114</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">//1</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">//2</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">//5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h2 id="_2-adapter\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-adapter\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 2.Adapter\u9002\u914D\u5668\u6A21\u5F0F</h2><p>\u4E00\u4E2A\u6BD4\u8F83\u5E38\u7528\u6784\u9020\u578B\u8BBE\u8BA1\u6A21\u5F0F\u2014\u2014Adapter\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u5173\u4E8E\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u6211\u4EEC\u4E3B\u8981\u9700\u8981\u5B66\u4E60\u5B83\u7684\u4E24\u79CD\u5B9E\u73B0\u65B9\u5F0F\uFF0C<strong>\u7C7B\u9002\u914D\u5668</strong>\u548C<strong>\u5BF9\u8C61\u9002\u914D\u5668</strong>\uFF0C\u4EE5\u53CA 5 \u79CD\u5E38\u89C1\u7684\u5E94\u7528\u573A\u666F</p><h3 id="\u57FA\u672C\u539F\u7406-1" tabindex="-1"><a class="header-anchor" href="#\u57FA\u672C\u539F\u7406-1" aria-hidden="true">#</a> \u57FA\u672C\u539F\u7406</h3><p>\u9002\u914D\u5668\u6A21\u5F0F\u7684\u82F1\u6587\u7FFB\u8BD1\u662F Adapter Design Pattern\u3002\u987E\u540D\u601D\u4E49\uFF0C\u8FD9\u4E2A\u6A21\u5F0F\u5C31\u662F\u7528\u6765\u505A\u9002\u914D\u7684\uFF0C\u5B83\u5C06\u4E0D\u517C\u5BB9\u7684\u63A5\u53E3\u8F6C\u6362\u4E3A\u53EF\u517C\u5BB9\u7684\u63A5\u53E3\uFF0C\u8BA9\u539F\u672C\u7531\u4E8E\u63A5\u53E3\u4E0D\u517C\u5BB9\u800C\u4E0D\u80FD\u4E00\u8D77\u5DE5\u4F5C\u7684\u7C7B\u53EF\u4EE5\u4E00\u8D77\u5DE5\u4F5C\u3002\u5BF9\u4E8E\u8FD9\u4E2A\u6A21\u5F0F\uFF0C\u6709\u4E00\u4E2A\u7ECF\u5E38\u88AB\u62FF\u6765\u89E3\u91CA\u5B83\u7684\u4F8B\u5B50\uFF0C\u5C31\u662F USB \u8F6C\u63A5\u5934\u5145\u5F53\u9002 \u914D\u5668\uFF0C\u628A\u4E24\u79CD\u4E0D\u517C\u5BB9\u7684\u63A5\u53E3\uFF0C\u901A\u8FC7\u8F6C\u63A5\u53D8\u5F97\u53EF\u4EE5\u4E00\u8D77\u5DE5\u4F5C\u3002</p><p>\u6BD4\u5982\uFF1A\u4F60\u53EF\u80FD\u6709\u4E24\u4E2A\u76F8\u4F3C\u7684\u7C7B\uFF0C\u4F46\u5B83\u4EEC\u5177\u6709\u4E0D\u540C\u7684\u65B9\u6CD5\u7B7E\u540D\uFF0C\u56E0\u6B64\u4F60\u5728\u5176\u4E2D\u4E00\u4E2A\u65B9\u6CD5\u7B7E\u540D\u4E4B\u4E0A\u521B\u5EFA\u4E00\u4E2A\u9002\u914D\u5668\uFF0C\u4EE5\u4FBF\u66F4\u5BB9\u6613\u5728\u8C03\u7528\u65F6\u4E2D\u5B9E\u73B0\u548C\u6269\u5C55</p><p>\u9002\u914D\u5668\u6A21\u5F0F\u4E0E\u524D\u9762\u7684\u88C5\u9970\u5668\u6A21\u5F0F\u6709\u4E9B\u7C7B\u4F3C\uFF0C\u90FD\u662F\u521B\u5EFA\u5B8C\u5BF9\u8C61\u540E\u4F7F\u7528\uFF0C\u4E0D\u8FC7\u8BBE\u914D\u5668\u6A21\u5F0F\u4E0D\u80FD\u50CF\u88C5\u9970\u5668\u6A21\u5F0F\u4E00\u6837\u9012\u5F52\u8C03\u7528</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f05b5ec8838d47ddaa6630cf9c824af6~tplv-k3u1fbpfcp-zoom-1.image" alt="\u5728\u8FD9\u91CC\u63D2\u5165\u56FE\u7247\u63CF\u8FF0"></p><ul><li><strong>Target</strong>: \u9700\u8981\u9002\u914D\u7684\u76EE\u6807\u63A5\u53E3/\u7C7B</li><li><strong>Adapter</strong>\uFF1A\u9002\u914D\u5668\u7C7B</li><li><strong>Adapter Interface</strong>: \u9002\u914D\u5668\u9700\u8981\u5B9E\u73B0\u7684\u63A5\u53E3\uFF0C\u4EE5\u4F7F\u76EE\u6807\u4E0E\u5BA2\u6237\u7AEF\u517C\u5BB9\uFF08\u63D2\u53E3\u548C\u7EBF\u540C\uFF09</li><li><strong>Client</strong>\uFF1A\u8C03\u7528\u9002\u914D\u5668\u7684\u5E94\u7528\u7A0B\u5E8F</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Adapter Concept Sample Code</span>

<span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">IA</span></span> <span class="token punctuation">{</span>
    <span class="token function">methodA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ClassA</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token constant">IA</span></span> <span class="token punctuation">{</span>
    <span class="token function">methodA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;method A&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">IB</span></span> <span class="token punctuation">{</span>
    <span class="token function">methodB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ClassB</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token constant">IB</span></span> <span class="token punctuation">{</span>
    <span class="token function">methodB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;method B&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ClassBAdapter</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token constant">IA</span></span> <span class="token punctuation">{</span>
    <span class="token comment">//ClassB\u4E2D\u6CA1\u6709methodA\uFF0C\u6240\u4EE5\u5C31\u9700\u8981\u521B\u5EFA\u9002\u914D\u5668\u6765\u517C\u5BB9</span>
    #classB<span class="token operator">:</span> ClassB

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>#classB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassB</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">methodA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token string">&#39;calls the class b method_b instead&#39;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>#classB<span class="token punctuation">.</span><span class="token function">methodB</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token constant">ITEMS</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">ClassA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ClassB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token constant">ITEMS</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token keyword">instanceof</span> <span class="token class-name">ClassB</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        item<span class="token punctuation">.</span><span class="token function">methodB</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        item<span class="token punctuation">.</span><span class="token function">methodA</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token constant">ADAPTED</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">ClassA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ClassBAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token constant">ADAPTED</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    item<span class="token punctuation">.</span><span class="token function">methodA</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

method <span class="token constant">A</span>
method <span class="token constant">B</span>
method <span class="token constant">A</span>
method <span class="token constant">B</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><blockquote><p>\u5C31\u53EA\u662F\u5728\u5916\u90E8\u5305\u4E86\u4E00\u5C42\uFF0C\u56E0\u6B64\u9664\u4E86\u4E0A\u9762\u7684\u5BF9\u8C61\u9002\u914D\u5668\u8FD8\u6709\u4E00\u79CD\u79F0\u4E3A\u7C7B\u9002\u914D\u5668\u4E5F\u662F\u540C\u6837\u7684\u6548\u679C\uFF0C\u7C7B\u9002\u914D\u5668\u5219\u662F\u91C7\u7528\u7EE7\u627F\u6765\u5B9E\u73B0\uFF0C\u5C06\u5C06\u539Fmethod\u7EE7\u627F\u5230\u590D\u5408Target\u63A5\u53E3\u7684method\u4E0A\uFF0C\u6BD4\u4E0A\u9762\u7684\u793A\u4F8B\u8FD8\u7B80\u5355\uFF0C\u8FD9\u91CC\u5C31\u4E0D\u5199\u51FA\u793A\u4F8B\u4E86\u3002</p><p>\u800C\u5177\u4F53\u9009\u7528\u90A3\u79CD\u9700\u8981\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u9009\u62E9</p></blockquote><h3 id="\u5E94\u7528\u4E3E\u4F8B-1" tabindex="-1"><a class="header-anchor" href="#\u5E94\u7528\u4E3E\u4F8B-1" aria-hidden="true">#</a> \u5E94\u7528\u4E3E\u4F8B</h3><p>\u5047\u8BBE\u6709\u4E00\u4E2A\u4F7F\u7528\u4E0D\u540C\u5DE5\u5177\u751F\u4EA7\u7ACB\u65B9\u4F53\u7684\u60C5\u5F62\uFF0C\u800C\u4E0D\u540C\u7684\u5DE5\u5177\u662F\u7531\u4E0D\u540C\u7684\u516C\u53F8\u53D1\u660E\u7684\uFF0C\u5E94\u7528\u7A0B\u5E8F\u901A\u8FC7UI\u754C\u9762\u8F93\u5165width\u3001height\u3001depth\u6765\u751F\u4EA7\u7ACB\u65B9\u4F53\uFF08\u63A5\u53E3\uFF09\uFF0C\u800C\u8F93\u5165\u7684\u8FD9\u4E9B\u53C2\u6570\u53EA\u4E0EA\u516C\u53F8\u7684\u751F\u4EA7\u5DE5\u5177\u6240\u9700\u53C2\u6570\u76F8\u540C\uFF0C\u800CB\u516C\u53F8\u7684\u751F\u4EA7\u5DE5\u5177\u7684\u6240\u9700\u53C2\u6570\u4E0EA\u516C\u53F8\u5E76\u4E0D\u540C\uFF08\u63A5\u53E3\u4E5F\u5C31\u4E0D\u540C\u4E86\uFF09\uFF0C\u90A3\u4E48\u4E3A\u4E86\u8FDE\u4E2A\u63A5\u53E3\u9002\u914D\uFF0C\u5C06B\u516C\u53F8\u7684\u751F\u4EA7\u5DE5\u5177\u9002\u914DA\u516C\u53F8\u751F\u4EA7\u5DE5\u5177\u7684\u63A5\u53E3\u3002</p><p>\u8FD9\u6837\u5728\u6709\u4E00\u4E2A\u516C\u53F8\uFF08\u4F9B\u5E94\u5546\uFF09\u5728\u5FD9\u65F6\u5C31\u53EF\u4EE5\u4F7F\u7528\u53E6\u4E00\u4E2A\u4F9B\u5E94\u5546\u4E86</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/16b1d7f3a32a4e48969d1bdaf37f0f57~tplv-k3u1fbpfcp-zoom-1.image" alt="\u5728\u8FD9\u91CC\u63D2\u5165\u56FE\u7247\u63CF\u8FF0"></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ICubeA</span> <span class="token punctuation">{</span>
    <span class="token function">manufacture</span><span class="token punctuation">(</span>width<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> depth<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">CubeA</span> <span class="token keyword">implements</span> <span class="token class-name">ICubeA</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> last_time <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token function">manufacture</span><span class="token punctuation">(</span>width<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> depth<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5982\u679C\u662F\u5FD9\u788C\u4E2D\u5219\u5236\u4F5C\u4E00\u4E2A\u6B63\u65B9\u4F53</span>
        <span class="token keyword">const</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">&gt;</span> CubeA<span class="token punctuation">.</span>last_time <span class="token operator">+</span> <span class="token number">1500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
                <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Company A built Cube with dimensions </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">x</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">x</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>depth<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
            <span class="token punctuation">)</span>
            CubeA<span class="token punctuation">.</span>last_time <span class="token operator">=</span> now
            <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token comment">//\u5FD9\u788C\u4E2D</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4E00\u4E2A\u5047\u60F3\u7684B\u516C\u53F8\u7684\u7ACB\u65B9\u4F53\u5236\u4F5C\u5DE5\u5177</span>
<span class="token keyword">interface</span> <span class="token class-name">ICubeB</span> <span class="token punctuation">{</span>
    <span class="token function">create</span><span class="token punctuation">(</span>
        top_left_front<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        bottom_right_back<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span>
    <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">CubeB</span> <span class="token keyword">implements</span> <span class="token class-name">ICubeB</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> last_time <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token function">create</span><span class="token punctuation">(</span>
        top_left_front<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        bottom_right_back<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span>
    <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5982\u679C\u4E0D\u5FD9\uFF0C\u90A3\u5C31\u7528\u5750\u6807\u5236\u9020\u4E00\u4E2A\u7ACB\u65B9\u4F53</span>
        <span class="token keyword">const</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">&gt;</span> CubeB<span class="token punctuation">.</span>last_time <span class="token operator">+</span> <span class="token number">3000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
                <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Company B built Cube with coords [</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>top_left_front<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>top_left_front<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>top_left_front<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">],[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>bottom_right_back<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>bottom_right_back<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>bottom_right_back<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">\`</span></span>
            <span class="token punctuation">)</span>
            CubeB<span class="token punctuation">.</span>last_time <span class="token operator">=</span> now
            <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token comment">// busy</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//\u9002\u914D\u5668\u7C7B\uFF0C\u4F7FCubeB\u7C7B\u4E5F\u80FD\u4F7F\u7528ICubeA\u63A5\u53E3</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">CubeBAdapter</span> <span class="token keyword">implements</span> <span class="token class-name">ICubeA</span> <span class="token punctuation">{</span>
    #cube<span class="token operator">:</span> CubeB
    
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>#cube <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CubeB</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">manufacture</span><span class="token punctuation">(</span>width<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> depth<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> success <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#cube<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
            <span class="token punctuation">[</span><span class="token number">0</span> <span class="token operator">-</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token operator">-</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token operator">-</span> depth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token number">0</span> <span class="token operator">+</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token operator">+</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token operator">+</span> depth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span>
        <span class="token punctuation">)</span>
        <span class="token keyword">return</span> success
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> totalCubes <span class="token operator">=</span> <span class="token number">5</span>
<span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span>

<span class="token keyword">const</span> <span class="token function-variable function">manufactureCube</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> width <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">const</span> height <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">const</span> depth <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">let</span> cube <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CubeA</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> success <span class="token operator">=</span> cube<span class="token punctuation">.</span><span class="token function">manufacture</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> depth<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        counter <span class="token operator">=</span> counter <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// try other manufacturer</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Company A was busy, so trying company B&#39;</span><span class="token punctuation">)</span>
        cube <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CubeBAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        success <span class="token operator">=</span> cube<span class="token punctuation">.</span><span class="token function">manufacture</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> depth<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            counter <span class="token operator">=</span> counter <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Company B was busy, so trying company A&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// wait some time between manufacturing each cube</span>
<span class="token keyword">const</span> interval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">manufactureCube</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>counter <span class="token operator">&gt;=</span> totalCubes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>totalCubes<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> cubes have been manufactured</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Company A was busy, so trying company B
Company B was busy, so trying company A
Company A built Cube with dimensions 6x5x10
Company A was busy, so trying company B
Company B built Cube with coords [-4,-3,-2.5],[4,3,2.5]
Company A built Cube with dimensions 4x5x3
Company A was busy, so trying company B
Company B was busy, so trying company A
Company A built Cube with dimensions 10x2x1
Company A was busy, so trying company B
Company B built Cube with coords [-0.5,-2,-2.5],[0.5,2,2.5]
5 cubes have been manufactured
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div>`,27);function g(C,v){const s=o("RouterLink");return c(),l(u,null,[n("nav",k,[n("ul",null,[n("li",null,[a(s,{to:"#_1-decorator-\u88C5\u9970\u5668\u6A21\u5F0F"},{default:p(()=>[b]),_:1}),n("ul",null,[n("li",null,[a(s,{to:"#\u57FA\u672C\u539F\u7406"},{default:p(()=>[m]),_:1})]),n("li",null,[a(s,{to:"#\u5E94\u7528\u4E3E\u4F8B"},{default:p(()=>[d]),_:1})])])]),n("li",null,[a(s,{to:"#_2-adapter\u9002\u914D\u5668\u6A21\u5F0F"},{default:p(()=>[w]),_:1}),n("ul",null,[n("li",null,[a(s,{to:"#\u57FA\u672C\u539F\u7406-1"},{default:p(()=>[y]),_:1})]),n("li",null,[a(s,{to:"#\u5E94\u7528\u4E3E\u4F8B-1"},{default:p(()=>[h]),_:1})])])])])]),f],64)}var A=e(r,[["render",g],["__file","\u88C5\u9970\u5668\u6A21\u5F0F\u3001\u9002\u914D\u5668\u6A21\u5F0F.html.vue"]]);export{A as default};
